{# Extend the base layout so this template reuses shared header/footer/styles #}
{% extends "base.html" %}

{# Set the HTML page title shown in the browser tab #}
{% block title %}Teacher Dashboard Â· ACME{% endblock %}

{# Begin the main content block that will be injected into `base.html` #}
{% block content %}
  <!-- Card container for the welcome message -->
  <div class="card" style="margin-bottom:20px;">
    <!-- Card header holds the title and a small badge -->
    <div class="card-header">
      <!-- Large welcome title that displays the teacher's full name -->
      <h2 class="card-title">Welcome {{ full_name }}!</h2>
      <!-- Small badge indicating the current portal (teacher) -->
      <span class="badge">Teacher Portal</span>
    </div>
  </div>

  <!-- Section showing the list of courses taught by this teacher -->
  <section class="card">
    <!-- Header for the courses table -->
    <div class="card-header"><h3 class="card-title">Your Courses</h3></div>
    <!-- Wrapper that provides scrolling or layout for the table -->
    <div class="table-wrap">
      <!-- Table listing course details -->
      <table>
        <thead>
          <!-- Table column headings: name, time, enrolled count, and actions -->
          <tr><th>Course Name</th><th>Time</th><th>Student Enrolled</th><th>Manage</th></tr>
        </thead>
        <tbody>
          {# If the `courses` variable (list) exists and is non-empty, render rows #}
          {% if courses %}
            {# Loop over each course object in the `courses` list #}
            {% for course in courses %}
              <tr>
                <!-- Course name links to the course detail page for this course -->
                <td><a href="{{ url_for('teacher_course_detail', course_id=course.id) }}">{{ course.course_name }}</a></td>
                <!-- Course scheduled time (string) -->
                <td>{{ course.time }}</td>
                <!-- Number of students currently enrolled / the course capacity -->
                <td>
                  {# If the course object has a pre-computed `enrolled` attribute use it, #}
                  {# otherwise count the enrollments relationship's length #}
                  {% if course.enrolled is defined %}{{ course.enrolled }}{% else %}{{ course.enrollments|length }}{% endif %}
                  <!-- Show capacity after a slash -->
                  / {{ course.capacity }}
                </td>
                <!-- Action column with a centered View button linking to details -->
                <td style="text-align:center;">
                  <a class="btn btn-ghost" href="{{ url_for('teacher_course_detail', course_id=course.id) }}">View</a>
                </td>
              </tr>
            {% endfor %}
          {% else %}
            <!-- Fallback row when no courses are assigned to this teacher -->
            <tr><td colspan="4" style="text-align:center;">No courses assigned</td></tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </section>
{# End of the content block injected into base template #}
{% endblock %}
